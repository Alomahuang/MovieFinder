<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Material+Icons" rel="stylesheet">

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
  <title>here to the one who dream</title>
</head>

<body>
  <div id="app">
    <v-app id="inspire">
      <v-app-bar app color="white">
        <img src="https://molteo.de/imgs/Logo_yellow.svg" style="max-width:180px" alt="logo" contain>
        <v-spacer></v-spacer>
        <div align-center center>
          <v-text-field solo-inverted flat hide-details label="Search" prepend-inner-icon="search"
          v-model="searchValue" v-on:change="search" type="text"/>
        </div>
      </v-app-bar>
      <v-content style="background: -webkit-linear-gradient(rgb(97, 191, 206),rgb(8, 178, 201));">
        <v-row justify="center">
          <v-col class="text-center" md="8">
            <v-container fluid>
              <span class="title">Top movies</span>
              <v-layout row wrap>
                <v-card class="mx-auto ma-4 pa-2" max-width="180" tile v-for="(item, i) in popMovies" :key="i"
                  v-on:click="showDetail(item)">
                  <!--v-img
                  :src="'https://image.tmdb.org/t/p/w500/' + item.poster_path" 
                  max-height="300px"
                  dark
                -->
                  <v-img src="C:\Users\aloma\Desktop\test.jpg" max-height="300px" dark>
                  </v-img>
                  <v-row>
                    <v-card-subtitle>
                      <div class="text-truncate" style="max-width: 150px;">{{item.title}}</div>
                    </v-card-subtitle>
                  </v-row>
                </v-card>
              </v-layout>
            </v-container>
          </v-col>
          <v-col class="text-center" md="4" v-if="activeItem" style="background-color: white;">
            <v-container>
              <v-card class="mx-auto ma-4 pa-2" max-width="344">
                <!--v-img class="detailPhoto"
              :src="'https://image.tmdb.org/t/p/w500/' + activeItem.backdrop_path" 
              height="200px"
            ></v-img-->
                <v-img class="detailPhoto" src="C:\Users\aloma\Desktop\test2.jpg" height="200px">
                </v-img>
                <v-card-text>
                  <v-row class="title mx-0">{{this.activeItem.title}}</v-row>
                  <v-row class="mx-0">{{getYear(this.activeItem.release_date)}}</v-row>
                  <v-row class="mx-0">
                    <v-rating v-bind:value="(this.activeItem.vote_average)/2" color="amber" dense half-increments
                      readonly size="24"></v-rating>
                    <div class="grey--text ml-4">{{this.activeItem.vote_average}} ({{this.activeItem.vote_count}})</div>
                  </v-row>
                  <v-row class="mx-0">
                    <p class="text-justify">{{this.activeItem.overview}}</p>

                  </v-row>
              </v-card>
            </v-container>
          </v-col>
        </v-row>
      </v-content>
    </v-app>
  </div>
</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vuex@2.0.0"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.15.2/axios.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
<script src="https://momentjs.com/downloads/moment.js"></script>
<script>
  var app = new Vue({
    el: '#app',
    vuetify: new Vuetify(),
    data() {
      return {
        popMovies: null,
        test: 'testok',
        activeItem: null,
        api_key: 'ee9a597328f8cb873b99161adc6bfa93',
        default_top_movies_queryUrl: 'https://api.themoviedb.org/3/discover/movie?api_key=ee9a597328f8cb873b99161adc6bfa93&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1',
        searchValue:null,
      }
    },
    filters: {
      moment: function (date) {
        return moment(date).format('MMMM Do YYYY, h:mm:ss a');
      }
    },
    mounted() {
      axios
        .get(this.default_top_movies_queryUrl)
        .then(response => { (this.popMovies = response.data.results); console.log(this.popMovies) })
    },
    methods: {
      showDetail: function (item) {
        queryUrl = 'https://api.themoviedb.org/3/movie/' + item.id + '?api_key=' + this.api_key + '&language=en-US';
        axios
          .get(queryUrl)
          .then(response => { this.activeItem = response.data; console.log(response) })
      },
      getYear: function (date) {
        return moment(date, 'YYYY-MM-DD').format('YYYY');
      },
      search:function(){
console.log(this.searchValue);
      }
    }
  })
</script>
<style>
  .detailPhoto {
    box-shadow: inset 0px -40px 50px rgba(0, 0, 0, 1);
  }
</style>